pipeline {
    agent any
    
    stages {
        stage('Install Allure') {
            steps {
                script {
                    // Define Allure version to install
                    def allureVersion = '2.27.0'
                    
                    // Download Allure tar.gz file
                    sh "wget -O allure-${allureVersion}.tgz https://repo.maven.apache.org/maven2/io/qameta/allure/allure-commandline/${allureVersion}/allure-commandline-${allureVersion}.tgz"
                    
                    // Unpack the downloaded file
                    sh "tar -zxf allure-${allureVersion}.tgz -C ./allure-${allureVersion}"
                    
                    // Set Allure bin directory in PATH
                    env.PATH = "${env.PATH}:${env.WORKSPACE}/allure-${allureVersion}/bin"
                    
                    // Print Allure version to verify installation
                    sh "allure --version"
                }
            }
        }
        
        // Add other stages of your pipeline
    }
    
    // Add post-build actions if necessary
}
