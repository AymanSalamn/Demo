pipeline {
    agent any
    stages {
        stage('Print Hello') {
            when {
                branch 'PR-*'
            }
            steps {
                script {
                    sh "git branch -r"
                    echo "Pull request branch name: ${env.CHANGE_BRANCH}"
                    echo "Running tests for files"
                    sh "git diff --name-only origin/main origin/${env.CHANGE_BRANCH}"
                }
            }
        }
    }
    
    post {
        always {
            // Always clean the workspace regardless of the build result
            deleteDir()
        }
    }
}
