pipeline {
    agent any

    stages {

        stage('Test') {
            steps {
                script {
                    // Your test steps here
                    echo 'Testing...'
                    // Update commit status after tests
                    commitStatus {
                        context('Test Stage')
                        message('Tests completed successfully')
                        status('SUCCESS')
                        targetUrl('http://your.jenkins.url/job/${env.JOB_NAME}/')
                        description('Tests completed')
                    }
                }
            }
        }
    }

    post {
        always {
            // Example of setting final status
            script {
                commitStatus {
                    context('Jenkins Pipeline')
                    message('Pipeline completed')
                    status('SUCCESS')
                    targetUrl('http://your.jenkins.url/job/${env.JOB_NAME}/')
                    description('Pipeline run completed')
                }
            }
        }
    }
}
